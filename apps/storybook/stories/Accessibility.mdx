import { Meta } from '@storybook/blocks';

<Meta title="Guidelines/Accessibility" />

# Accessibility Guidelines

This guide provides comprehensive accessibility guidelines and best practices for using our component library. All components are built with WCAG 2.1 AA compliance in mind.

## Overview

Accessibility is a core principle of our design system. Every component is designed to be usable by people with disabilities, including those who use assistive technologies like screen readers, voice control, or keyboard navigation.

## WCAG 2.1 AA Compliance

Our components meet or exceed Web Content Accessibility Guidelines (WCAG) 2.1 Level AA standards:

- **Perceivable**: Information and UI components must be presentable in ways users can perceive
- **Operable**: UI components and navigation must be operable
- **Understandable**: Information and UI operation must be understandable
- **Robust**: Content must be robust enough to be interpreted by assistive technologies

## Color and Contrast

### Color Contrast Requirements

- **Normal text**: Minimum 4.5:1 contrast ratio
- **Large text (18pt+)**: Minimum 3:1 contrast ratio
- **UI components**: Minimum 3:1 contrast ratio

### Our Color Palette

| Color | Usage | Contrast Ratio | WCAG Status |
|-------|-------|----------------|-------------|
| Primary (#f44e00) | Accent, buttons | 4.5:1 | ✅ AA |
| White (#f8f8f8) | Text on dark | 21:1 | ✅ AAA |
| Black (#000000) | Background | 21:1 | ✅ AAA |
| Text Grey (#787878) | Secondary text | 4.2:1 | ✅ AA |

### Color Usage Guidelines

- Never rely solely on color to convey information
- Use color in combination with icons, text, or patterns
- Provide alternative ways to identify interactive elements
- Test with color blindness simulators

## Typography and Readability

### Font Sizes

- **Minimum body text**: 16px (1rem)
- **Line height**: 1.5 for body text, 1.2 for headings
- **Letter spacing**: 0.05rem for uppercase text

### Readability Guidelines

- Use clear, simple language
- Write descriptive labels and instructions
- Provide helpful error messages
- Use consistent terminology

## Keyboard Navigation

### Tab Order

- Logical tab sequence through interactive elements
- Skip links for main content
- Focus indicators visible at all times

### Keyboard Shortcuts

- **Tab**: Move to next interactive element
- **Shift + Tab**: Move to previous interactive element
- **Enter/Space**: Activate buttons and links
- **Escape**: Close modals and dropdowns
- **Arrow keys**: Navigate within components

### Focus Management

- Visible focus indicators on all interactive elements
- Focus trapped within modals
- Focus restored after closing modals
- Focus moved to error messages when validation fails

## Screen Reader Support

### ARIA Labels and Descriptions

All components include proper ARIA attributes:

```tsx
// Button with descriptive label
<Button aria-label="Close dialog">
  ×
</Button>

// Input with error message
<Input
  label="Email"
  error={true}
  errorMessage="Please enter a valid email"
  aria-describedby="email-error"
/>
```

### Semantic HTML

- Use proper heading hierarchy (h1, h2, h3, etc.)
- Use semantic elements (button, input, label, etc.)
- Provide meaningful alt text for images
- Use landmarks (main, nav, aside, etc.)

## Form Accessibility

### Labels and Instructions

- Every form control has a visible label
- Required fields are clearly marked
- Instructions are provided before form fields
- Error messages are associated with form controls

### Validation

- Real-time validation with clear error messages
- Error messages have `role="alert"` for screen readers
- Success states are communicated clearly
- Validation errors are announced immediately

### Example: Accessible Form

```tsx
<form>
  <Input
    label="Email Address"
    type="email"
    required
    aria-describedby="email-help"
    error={emailError}
    errorMessage={emailErrorMessage}
  />
  <div id="email-help">
    We'll never share your email with anyone else.
  </div>
  
  <Button type="submit">
    Subscribe
  </Button>
</form>
```

## Component-Specific Guidelines

### Buttons

- Always provide accessible names
- Use `aria-pressed` for toggle buttons
- Include loading states with `aria-live`
- Ensure sufficient touch targets (44px minimum)

### Inputs

- Associate labels with form controls
- Use `aria-describedby` for help text
- Provide clear error messages
- Support autocomplete attributes

### Navigation

- Use semantic nav elements
- Provide skip links
- Indicate current page/section
- Ensure keyboard accessibility

## Testing Accessibility

### Automated Testing

Use our built-in accessibility testing tools:

1. **Accessibility Panel**: Run automated scans
2. **Keyboard Testing**: Test tab navigation
3. **Screen Reader Testing**: Use VoiceOver, NVDA, or JAWS
4. **Color Contrast**: Verify contrast ratios

### Manual Testing Checklist

- [ ] All interactive elements are keyboard accessible
- [ ] Focus indicators are visible
- [ ] Color contrast meets WCAG AA standards
- [ ] Screen reader announces content correctly
- [ ] Form validation is accessible
- [ ] Error messages are clear and helpful
- [ ] Content is readable at 200% zoom
- [ ] No content flashes more than 3 times per second

### Testing Tools

- **axe-core**: Automated accessibility testing
- **WAVE**: Web accessibility evaluation
- **Lighthouse**: Built-in accessibility audit
- **Color Oracle**: Color blindness simulation

## Common Accessibility Issues

### 1. Missing Labels

❌ **Bad**
```tsx
<input type="email" placeholder="Email" />
```

✅ **Good**
```tsx
<Input label="Email Address" type="email" />
```

### 2. Poor Color Contrast

❌ **Bad**
```css
color: #999; /* Low contrast */
```

✅ **Good**
```css
color: #787878; /* WCAG AA compliant */
```

### 3. Missing Focus Indicators

❌ **Bad**
```css
button:focus {
  outline: none; /* No focus indicator */
}
```

✅ **Good**
```css
button:focus-visible {
  outline: 2px solid #f44e00;
  outline-offset: 2px;
}
```

### 4. Inaccessible Error Messages

❌ **Bad**
```tsx
{error && <div>Error</div>}
```

✅ **Good**
```tsx
{error && (
  <div role="alert" aria-live="polite">
    Please enter a valid email address
  </div>
)}
```

## Resources

### Documentation

- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)
- [WebAIM Guidelines](https://webaim.org/)

### Tools

- [axe DevTools](https://www.deque.com/axe/devtools/)
- [WAVE Web Accessibility Evaluator](https://wave.webaim.org/)
- [Color Contrast Analyzer](https://www.tpgi.com/color-contrast-checker/)

### Screen Readers

- [NVDA (Windows)](https://www.nvaccess.org/)
- [JAWS (Windows)](https://www.freedomscientific.com/products/software/jaws/)
- [VoiceOver (macOS/iOS)](https://www.apple.com/accessibility/vision/)
- [Orca (Linux)](https://help.gnome.org/users/orca/)

## Getting Help

If you encounter accessibility issues or need guidance:

1. Check the component documentation
2. Use the built-in testing tools
3. Consult the accessibility guidelines
4. Test with real users when possible

Remember: Accessibility is not a one-time check but an ongoing process. Test early and often, and involve users with disabilities in your testing process.

---

*Last updated: October 2024*